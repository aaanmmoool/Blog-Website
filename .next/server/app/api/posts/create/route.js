"use strict";(()=>{var e={};e.id=810,e.ids=[810],e.modules={98860:e=>{e.exports=require("jsdom")},11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},88110:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>b,originalPathname:()=>y,patchFetch:()=>P,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>v,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>q});var r={};o.r(r),o.d(r,{POST:()=>g});var n=o(95419),s=o(69108),a=o(99678),i=o(78070),c=o(22345),l=o(47204),u=o(3555),d=o.n(u),p=o(87709),m=o.n(p);async function g(e){try{await (0,c.Z)();let{title:t,content:o}=await e.json();if(!t||!o)return i.Z.json({error:"Title and content are required"},{status:400});let r=d()(t,{lower:!0,strict:!0,remove:/[*+~.()'"!:@]/g}),n=await l.Z.findOne({slug:r}),s=1;for(;n;)r=`${d()(t,{lower:!0,strict:!0})}-${s}`,n=await l.Z.findOne({slug:r}),s++;let a=m().sanitize(o),u=new l.Z({title:t.trim(),content:a,slug:r});return await u.save(),i.Z.json({success:!0,post:{id:u._id,title:u.title,content:u.content,slug:u.slug,createdAt:u.createdAt,updatedAt:u.updatedAt}},{status:201})}catch(e){return console.error("Error creating post:",e),i.Z.json({error:"Failed to create post"},{status:500})}}let h=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/posts/create/route",pathname:"/api/posts/create",filename:"route",bundlePath:"app/api/posts/create/route"},resolvedPagePath:"C:\\Users\\Asus\\Desktop\\Blog Website\\app\\api\\posts\\create\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:f,staticGenerationAsyncStorage:w,serverHooks:v,headerHooks:b,staticGenerationBailout:q}=h,y="/api/posts/create/route";function P(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:w})}},22345:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(11185),n=o.n(r);let s=process.env.MONGODB_URI;if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");console.log("MongoDB URI found:",s?"Yes":"No");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let i=async function(){if(a.conn)return console.log("Using cached database connection"),a.conn;a.promise||(console.log("Creating new database connection..."),a.promise=n().connect(s,{bufferCommands:!1}).then(e=>(console.log("Database connected successfully"),e)).catch(e=>{throw console.error("Database connection failed:",e),e}));try{a.conn=await a.promise}catch(e){throw a.promise=null,console.error("Error in dbConnect:",e),e}return a.conn}},47204:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(11185),n=o.n(r);let s=new(n()).Schema({title:{type:String,required:!0,trim:!0,maxlength:200},content:{type:String,required:!0},slug:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0}},{timestamps:!0}),a=n().models.Post||n().model("Post",s)}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[638,206,718],()=>o(88110));module.exports=r})();