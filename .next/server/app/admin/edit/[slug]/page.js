(()=>{var e={};e.id=418,e.ids=[418],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58853:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var r=s(50482),i=s(69108),o=s(62563),l=s.n(o),a=s(68300),n={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);s.d(t,n);let d=["",{children:["admin",{children:["edit",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9029)),"C:\\Users\\Asus\\Desktop\\Blog Website\\app\\admin\\edit\\[slug]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,34599)),"C:\\Users\\Asus\\Desktop\\Blog Website\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\Asus\\Desktop\\Blog Website\\app\\admin\\edit\\[slug]\\page.tsx"],c="/admin/edit/[slug]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/edit/[slug]/page",pathname:"/admin/edit/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44086:(e,t,s)=>{Promise.resolve().then(s.bind(s,86303))},86303:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(95344),i=s(3729),o=s(22254),l=s(53267),a=s.n(l),n=s(83717),d=s.n(n);s(24221);let u=a()(async()=>{},{loadableGenerated:{modules:["C:\\Users\\Asus\\Desktop\\Blog Website\\app\\admin\\edit\\[slug]\\EditPostClient.tsx -> react-quill"]},ssr:!1,loading:()=>r.jsx("p",{children:"Loading editor..."})});function c({params:e}){let t=(0,o.useRouter)(),[s,l]=(0,i.useState)(null),[a,n]=(0,i.useState)(""),[c,p]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[g,b]=(0,i.useState)(""),[h,f]=(0,i.useState)(!0),[y,j]=(0,i.useState)(!1),[v,w]=(0,i.useState)(null),[q,k]=(0,i.useState)(!1);(0,i.useEffect)(()=>{N()},[e.slug]);let N=async()=>{try{let t=await fetch(`/api/posts/${e.slug}`);if(!t.ok)throw Error("Post not found");let s=await t.json();l(s.post),n(s.post.title),p(s.post.content),x(s.post.slug),b(s.post.title)}catch(e){w("Failed to load post"),console.error("Error fetching post:",e)}finally{f(!1)}};(0,i.useEffect)(()=>{a!==g&&a.trim()?(k(!0),x(d()(a,{lower:!0,strict:!0,remove:/[*+~.()'"!:@]/g}))):a===g&&k(!1)},[a,g]);let P=async s=>{if(s.preventDefault(),!a.trim()||!c.trim()){w("Title and content are required");return}j(!0),w(null);try{let s=await fetch(`/api/posts/${e.slug}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a.trim(),content:c.trim()})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to update post")}await s.json(),t.push("/admin")}catch(e){w(e instanceof Error?e.message:"Failed to update post")}finally{j(!1)}};return h?r.jsx("div",{className:"flex justify-center items-center min-h-64",children:r.jsx("div",{className:"text-lg text-gray-600",children:"Loading post..."})}):v&&!s?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-red-600 text-lg mb-4",children:v}),r.jsx("button",{onClick:()=>t.push("/admin"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Back to Admin"})]}):r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Post"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Update your blog post using the rich text editor below."})]}),(0,r.jsxs)("form",{id:"edit-post-form",onSubmit:P,className:"space-y-6 pb-32",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),r.jsx("input",{type:"text",id:"title",value:a,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter post title...",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-2",children:["Slug ",q&&r.jsx("span",{className:"text-orange-600",children:"(Will be updated)"})]}),r.jsx("input",{type:"text",id:"slug",value:m,readOnly:!0,className:`w-full px-3 py-2 border rounded-md shadow-sm cursor-not-allowed ${q?"border-orange-300 bg-orange-50 text-orange-700":"border-gray-300 bg-gray-50 text-gray-600"}`,placeholder:"Slug will be generated from title..."}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:q?"The slug will be updated to match the new title for SEO consistency.":"The slug is automatically generated from the title and will be used in the URL."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),r.jsx("div",{className:"border border-gray-300 rounded-md",children:r.jsx(u,{value:c,onChange:p,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","blockquote","code-block"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","color","background","align","link","image","blockquote","code-block"],placeholder:"Write your post content...",style:{height:"400px"}})})]}),v&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsx("div",{className:"text-red-800",children:v})})]}),(0,r.jsxs)("div",{className:"fixed left-0 bottom-0 w-full bg-white shadow-md py-4 px-4 flex justify-end space-x-4 z-50",children:[r.jsx("button",{type:"button",onClick:()=>t.push("/admin"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),r.jsx("button",{type:"submit",form:"edit-post-form",disabled:y||!a.trim()||!c.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Saving...":"Save Changes"})]})]})})}},9029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(25036),i=s(49605),o=s(31849),l=s(44551);let a=(0,s(86843).createProxy)(String.raw`C:\Users\Asus\Desktop\Blog Website\app\admin\edit\[slug]\EditPostClient.tsx`),{__esModule:n,$$typeof:d}=a,u=a.default;async function c({params:e}){let{slug:t}=await e;return await (0,i.getServerSession)(o.L)||(0,l.redirect)("/admin/login"),r.jsx(u,{params:{slug:t}})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,825,384,551,320],()=>s(58853));module.exports=r})();